{# TODO REFACTOR THIS CODE SO IT ISN'T SO REDUNDANT- Also make it look pretty #}
{% extends 'MusicMBundle::layout.html.twig' %}

{% block title %}{{Song.title}} on Souare{% endblock %}

{% block body %}
    <article class="blog">
        <header>
            <h2> {{ Song.title }} - by {{Song.owner}}</h2>
            {#<h2> {{Track.name|upper}}, a <b>{{Track.instrument|upper}}</b> track on Souare </h1>#}
        </header>
        <div class="date">Song most recently updated at <time datetime="{{ Song.updated|date('c') }}">{{ Song.updated|date('g:i A F j, Y') }}</time></div>
        <br>
        {% for Track in Song.Tracks %}
            <div id="trackTitle">
                <h3> {{ Track.name }}, a {{Track.instrument}} track by {{Track.creator}}</h3>
            </div>
                    <div class="date">Originally published on <time datetime="{{ Track.created|date('c') }}">{{ Track.created|date('g:i A F j, Y') }}</time></div>
            <br>

            <audio controls>

            <source src="{{ asset(['uploads/tracks/', Track.id, '.', Track.path]|join) }}" type="audio/mpeg">
            {#<source src="#" type="audio/ogg"> TODO ADD OGG SUPPORT also convert above to mp3 for legit #}
            Your browser does not support the audio element.
            </audio>

        {% else %}
            There are no Tracks in this song you goofball! <br> <br>
        {% endfor %}
            Visit a track's page to add it to this song.
        {#
        <audio controls>

        <source src="{{ asset(['uploads/tracks/', Track.id, '.', Track.path]|join) }}" type="audio/mpeg">#}
        {#<source src="#" type="audio/ogg"> TODO ADD OGG SUPPORT also convert above to mp3 for legit #}
        {#Your browser does not support the audio element.
        </audio>
        #}
        {#
            <div class="date"><time datetime="{{ blog.created|date('c') }}">{{ blog.created|date('l, F j, Y') }}</time></div>
            <h2>{{ blog.title }}</h2>
        </header>
        <img src="{{ asset(['images/', blog.image]|join) }}" alt="{{ blog.title }} image not found" class="large" />
        <div>
            <p>{{ blog.blog }}</p>
        </div> #}
    </article>
{% endblock %}